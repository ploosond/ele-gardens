import{a as g,c as f,r as l,A as x,u as h,b,d as w,j as e}from"./index-Cs5wVyye.js";import{t as y}from"./index-5sQU16Y4.js";const j="/api/users/login",v=async s=>(await g.post(j,s)).data,N={login:v},F=f("/login")({component:C});function C(){const[s,o]=l.useState({username:"",password:""}),{login:c}=l.useContext(x),m=h(),t=b({strict:!1}),d=w(),u=a=>{o(n=>({...n,[a.target.name]:a.target.value}))},p=async a=>{var n;a.preventDefault();try{const r=await N.login(s);c(r),o({username:"",password:""}),t!=null&&t.redirect?d.history.push(t.redirect):m({to:"/admin"})}catch(r){let i="Wrong credentials";((n=r.response)==null?void 0:n.status)===401?i="Invalid username or password.":r.message&&(i=r.message),y.error(i)}};return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:e.jsx("div",{className:"w-full max-w-md rounded-lg bg-white p-8 shadow-lg",children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"mb-1 block text-sm font-medium",children:"Username *"}),e.jsx("input",{type:"text",name:"username",value:s.username,onChange:u,required:!0,className:"w-full rounded-md border p-2 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"mb-1 block text-sm font-medium",children:"Password *"}),e.jsx("input",{type:"password",name:"password",value:s.password,onChange:u,required:!0,className:"w-full rounded-md border p-2 focus:outline-none"})]}),e.jsx("button",{type:"submit",className:"w-full rounded-md bg-primary px-4 py-2 text-on-dark hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:"Login"})]})})})}export{F as Route};
